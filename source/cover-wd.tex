%!TEX root = std.tex
%%--------------------------------------------------
%% Title page for the C++ Standard


\thispagestyle{empty}
\begingroup
\def\hd{\begin{tabular}{ll}
          \textbf{Document Number:} & D1721R2                     \\
          \textbf{Date:}            & \reldate                    \\
          \textbf{Reply to:}        & Marshall Clow               \\
                                    & mclow.lists@gmail.com
          \end{tabular}
}
\newlength{\hdwidth}
\settowidth{\hdwidth}{\hd}
\hfill\begin{minipage}{\hdwidth}\hd\end{minipage}
\endgroup

\vspace{2.5cm}
\begin{center}
\textbf{\Huge
Mandating the Standard Library:\\Clause 29 - Input/output library}
\end{center}

With the adoption of P0788R3, we have a new way of specifying requirements for the
library clauses of the standard. This is one of a series of papers reformulating the
requirements into the new format. This effort was strongly influenced by the informational
paper P1369R0.

The changes in this series of papers fall into three broad categories.
\begin{itemize}
\item{Change "participate in overload resolution" wording into "Constraints" elements}
\item{Change "Requires" elements into either "Mandates" or "Expects", depending (mostly) on whether or not they can be checked at compile time.}
\item{Drive-by fixes (hopefully very few)}
\end{itemize}

This paper covers Clause 29 (Input/output), and is based on N4830.

The entire clause is reproduced here, but the changes are confined to a few sections:

\begin{multicols}{2}
\begin{itemize}
\item{ios.init}							\ref{ios.init}
\item{ios.base.storage}					\ref{ios.base.storage}
\item{ios.base.callback}				\ref{ios.base.callback}
\item{ios.base.cons}					\ref{ios.base.cons}
\item{basic.ios.members}				\ref{basic.ios.members}
\item{streambuf.virt.get}				\ref{streambuf.virt.get}
\item{streambuf.virt.put}				\ref{streambuf.virt.put}
\item{istream.cons}						\ref{istream.cons}
\item{istream.assign}					\ref{istream.assign}
\item{istream.rvalue}					\ref{istream.rvalue}
\item{iostream.dest}					\ref{iostream.dest}
\item{iostream.assign}					\ref{iostream.assign}
\item{ostream.cons}						\ref{ostream.cons}
\item{ostream.assign}					\ref{ostream.assign}
\item{ostream.inserters.character}		\ref{ostream.inserters.character}
\item{ostream.rvalue}					\ref{ostream.rvalue}
\item{std.manip}						\ref{std.manip}
\item{ext.manip}						\ref{ext.manip}
\item{stringbuf.assign}					\ref{stringbuf.assign}
\item{quoted.manip}						\ref{quoted.manip}
\item{istringstream.assign}				\ref{istringstream.assign}
\item{ostringstream.assign}				\ref{ostringstream.assign}
\item{stringstream.assign}				\ref{stringstream.assign}
\item{filebuf.members}					\ref{filebuf.members}
\item{filebuf.cons}						\ref{filebuf.cons}
\item{filebuf.assign}					\ref{filebuf.assign}
\item{ifstream.cons}					\ref{ifstream.cons}
\item{ifstream.assign}					\ref{ifstream.assign}
\item{ofstream.cons}					\ref{ofstream.cons}
\item{ofstream.assign}					\ref{ofstream.assign}
\item{fstream.cons}						\ref{fstream.cons}
\item{fstream.assign}					\ref{fstream.assign}
\item{syncstream.syncbuf.cons}			\ref{syncstream.syncbuf.cons}
\item{syncstream.syncbuf.assign}		\ref{syncstream.syncbuf.assign}
\item{fs.race.behavior}					\ref{fs.race.behavior}
\item{fs.path.construct}				\ref{fs.path.construct}
\item{fs.path.modifiers}				\ref{fs.path.modifiers}
\item{fs.dir.itr.members}				\ref{fs.dir.itr.members}
\item{fs.rec.dir.itr.members}			\ref{fs.rec.dir.itr.members}
\item{fs.op.copy}						\ref{fs.op.copy}
\item{fs.op.copy.file}					\ref{fs.op.copy.file}
\item{fs.op.permissions}				\ref{fs.op.permissions}
\end{itemize}
\end{multicols}

Drive-by fixes:
\begin{itemize}
\item{Re-ordered a couple of clauses in [fs.path.modifiers]. }
\item{Struck a few clauses that read "Constructs an object of type XXXX".}
\item{Struck a few clauses that read "Destroys an object of type XXXX". What object? SOME object!}
\item{Changed the requirements for \tcode{get\_time} and \tcode{put\_time} in [ext.manip] to use "is a valid range."}
\item{De-shalled a bunch of bits in [std.manip] and [quoted.manip]}
\item{Removed a bunch of redundant wording describing assignment operators}
\item{Changed a bunch of swap \effects from "As if by" to "Equivalent to:"}
\end{itemize}

%Open questions:
%\begin{itemize}
%\end{itemize}

Changes from R0:
\begin{itemize}
\item{Update to N4830}
\item{Changed a \requires --> \expects in [fs.race.behavior].}
\item{Changed the requirements for \tcode{get\_time} and \tcode{put\_time} in [ext.manip] to use "is a valid range."}
\item{De-shalled a bunch of bits in [std.manip] and [quoted.manip]}
\item{Struck a few clauses that read "Destroys an object of type XXXX".}
\item{Items from the LWG review from the 6-Sep teleconference.}
\item{Changed the last few Requires in [streambuf.virt.get] and [streambuf.virt.put]}
\end{itemize}

Changes from R1:
\begin{itemize}
\item{Items from the LWG review from the 11-Oct teleconference.}
\item{Removed a bunch of useless constructor wording from filebuf/ifstream/ofstream.}
\item{Removed [ifstream.assign]/1 and /2, [ofstream.assign]/1 and /2, [fstream.assign]/1 and /2, [ostringstream.assign]/1 and /2,  [istringstream.assign]/1 and /2, [ostringstream.assign]/1 and /2, and [stringstream.assign]/1 and /2 because they didn't add anything.}
\item{Updates based on review from Tim Song.}
\end{itemize}

Thanks to Daniel Kr√ºgler and Tim Song for their advice and reviews.

\vfill
Help for the editors: The changes here can be viewed as latex sources with the following commands
\begin{verbatim}
git clone git@github.com:mclow/mandate.git
cd mandate
git diff master..chapter29 iostreams.tex
\end{verbatim}
